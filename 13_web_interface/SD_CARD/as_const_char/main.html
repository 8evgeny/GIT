"<!DOCTYPE html> "
"<html lang='ru'>"
"  <head> "
"  <meta charset='utf-8'>"
"  <h2 align='center'>GIT - Группа индустриальных технологий</h2> "
"  <title>Мост IDSN<->IP</title>"
"  </head>"
"  <body> "
"  <h3>Настройка моста ISDN - IP</h3> "
"  <form onsubmit='return false;' id='frm1' style='visibility:hidden'>"
"    <label for='host_ip'>IP адрес хоста:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label> "
"    <input type='text' id='host_ip' name='host_ip' value='' style='width: 110px;'>"
"    <input type='button' onclick='send1()' value='обновить' style='"
"    width: 80px; margin-left: 20px;'>"
"  </form>"
"  <form onsubmit='return false;' id='frm2' style='visibility:hidden'>"
"    <label for='mask'>Маска сети:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>"
"    <input type='text' id='mask' name='mask' value='' style='width: 110px;'>"
"    <input type='button' onclick='send2()' value='обновить' style='"
"    width: 80px; margin-left: 20px;'>"
"  </form>"
"  <form onsubmit='return false;' id='frm3' style='visibility:hidden'>"
"    <label for='gateway'>IP адрес шлюза:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>"
"    <input type='text' id='gateway' name='gateway' value='' style='width: 110px;'>"
"    <input type='button' onclick='send3()' value='обновить' style='"
"    width: 80px; margin-left: 20px;'>"
"  </form> "
"  <form onsubmit='return false;' id='frm4' style='visibility:hidden'>"
"    <label for='dest_ip'>IP адрес получателя:</label>"
"    <input type='text' id='dest_ip' name='dest_ip' value='' style='width: 110px;'>"
"    <input type='button' onclick='send4()' value='обновить' style='"
"    width: 80px; margin-left: 20px;'>"
"  </form>"
"  <form onsubmit='return false;' id='frm5' style='visibility:hidden'>"
"    <label for='mac'>MAC адрес:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>"
"    <input type='text' readonly id='mac' name='mac' value='' style='width: 110px;'>"
"  </form><br>"
"<button onclick='reboot()' style='border-left-width: 2px;border-left-style: solid;margin-left: 20px;'>Перезагруза хоста</button><button  onclick='change_pass()' style='border-left-width: 2px;border-left-style: solid;margin-left: 600px; width: 130px'>Сменить пароль</button>"
"<p id='demo' value='  '></p>"
"<script>"
"  function sleep(milliseconds) "
"  {"
"    const date = Date.now();"
"    let currentDate = null;"
"    do {"
"      currentDate = Date.now();"
"    } while (currentDate - date < milliseconds);"
"  };"
"  sleep(100);"
"  let request1 = new XMLHttpRequest();"
"  request1.open('GET', '/host_IP');"
"  request1.send();"
"  sleep(100);"
"  request1.onreadystatechange = function() "
"  {"
"    document.getElementById('frm1').elements[0].value=request1.responseText.toString().substring(0, 15);"
"    document.getElementById('frm1').style.visibility = 'visible';"
"  };"
"  let request2 = new XMLHttpRequest();"
"  sleep(100);"
"  request2.open('GET', '/dest_IP');"
"  request2.send();"
"  sleep(100);"
"  request2.onreadystatechange = function() "
"  {"
"    document.getElementById('frm4').elements[0].value=request2.responseText.toString().substring(0, 15);"
"    document.getElementById('frm4').style.visibility = 'visible';"
"  };"
"  let request3 = new XMLHttpRequest();"
"  sleep(100);"
"  request3.open('GET', '/gate_IP');"
"  request3.send();"
"  sleep(100);"
"  request3.onreadystatechange = function() "
"  {"
"    document.getElementById('frm3').elements[0].value=request3.responseText.toString().substring(0, 15);"
"    document.getElementById('frm3').style.visibility = 'visible';"
"  };"
"  let request4 = new XMLHttpRequest();"
"  sleep(100);"
"  request4.open('GET', '/mask_IP');"
"  request4.send();"
"  sleep(100);"
"  request4.onreadystatechange = function() "
"  {"
"    document.getElementById('frm2').elements[0].value=request4.responseText.toString().substring(0, 15);"
"    document.getElementById('frm2').style.visibility = 'visible';"
"  };"
"  let request5 = new XMLHttpRequest();"
"  sleep(100);"
"  request5.open('GET', '/mac_adr');"
"  request5.send();"
"  sleep(100);"
"  request5.onreadystatechange = function() "
"  {"
"    document.getElementById('frm5').elements[0].value=request5.responseText.toString().substring(0, 15);"
"    document.getElementById('frm5').style.visibility = 'visible';"
"  };"
""
""
"  function ValidateIPaddress(ipaddress) "
"  {  "
"    if (/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(ipaddress)) "
"    {  "
"      return (true); "
"    }  "
"  return (false);  "
"  }; "
"  let req = new XMLHttpRequest();"
"  function send1() "
"  {"
"    let command = 'SET_HOST_IP';"
"    let x1 = document.getElementById('frm1').elements[0].value;"
"    if(ValidateIPaddress(x1))"
"    {"
"      req.open('GET', command+x1);"
"      req.send();"
"      sleep(2000);"
"      document.getElementById('demo').innerHTML = 'IP адрес хоста обновлен';"
"    }"
"    else"
"    {"
"      document.getElementById('demo').innerHTML = 'Некоррекнтый IP адрес';"
"      document.getElementById('frm1').elements[0].value = '';"
"      return false;"
"    }"
"  };                                               "
"  function send2() "
"  {"
"    let command = 'SET_MASK_IP';"
"    let x2 = document.getElementById('frm2').elements[0].value;"
"    if(ValidateIPaddress(x2))"
"    {"
"      req.open('GET', command+x2);"
"      req.send();"
"      sleep(2000);"
"      document.getElementById('demo').innerHTML = 'Маска сети обновлена';"
"    }"
"    else"
"    {"
"      document.getElementById('demo').innerHTML = 'Некорректная маска';"
"      document.getElementById('frm2').elements[0].value = '';"
"      return false;"
"    }"
"  };"
"  function send3() "
"  {"
"    let command = 'SET_GATE_IP';"
"    let x3 = document.getElementById('frm3').elements[0].value;"
"    if(ValidateIPaddress(x3))"
"    {"
"      req.open('GET', command+x3);"
"      req.send();"
"      sleep(2000);"
"      document.getElementById('demo').innerHTML = 'IP адрес шлюза обновлен';"
"    }"
"    else"
"    {"
"      document.getElementById('demo').innerHTML = 'Hекоррекнтый IP адрес';"
"      document.getElementById('frm3').elements[0].value = '';"
"      return false;"
"    }"
"  };"
"  function send4() "
"  {"
"    let command = 'SET_DEST_IP';"
"    let x4 = document.getElementById('frm4').elements[0].value;"
"    if(ValidateIPaddress(x4))"
"    {"
"      req.open('GET', command+x4);"
"      req.send();"
"      sleep(2000);"
"      document.getElementById('demo').innerHTML = 'IP адрес получателя обновлен';"
"    }"
"    else"
"    {"
"      document.getElementById('demo').innerHTML = 'Некоррекнтый IP адрес';"
"      document.getElementById('frm4').elements[0].value = '';"
"      return false;"
"    }"
"  };"
"  function reboot() "
"  {"
"    let command = 'REBOOT';"
"      req.open('GET', command);"
"      req.send();"
"      sleep(2000);"
"      document.getElementById('demo').innerHTML = 'Хост перезагружен';"
"  };"
"  var md5 = function (str) "
"  {"
"    /*"
"     * Add integers, wrapping at 2^32. This uses 16-bit operations internally"
"     * to work around bugs in some JS interpreters."
"     */"
"    function safe_add(x, y) "
"    {"
"      var lsw = (x & 0xFFFF) + (y & 0xFFFF), msw = (x >> 16) + (y >> 16) + (lsw >> 16);"
"      return (msw << 16) | (lsw & 0xFFFF);"
"    };"
"    /*"
"     * Bitwise rotate a 32-bit number to the left."
"     */"
"    function bit_rol(num, cnt) "
"    {"
"      return (num << cnt) | (num >>> (32 - cnt));"
"    };"
"    /*"
"     * These functions implement the four basic operations the algorithm uses."
"     */"
"    function md5_cmn(q, a, b, x, s, t) "
"    {"
"      return safe_add(bit_rol(safe_add(safe_add(a, q), safe_add(x, t)), s), b);"
"    };"
"    function md5_ff(a, b, c, d, x, s, t) "
"    {"
"      return md5_cmn((b & c) | ((~b) & d), a, b, x, s, t);"
"    };"
"    function md5_gg(a, b, c, d, x, s, t) "
"    {"
"      return md5_cmn((b & d) | (c & (~d)), a, b, x, s, t);"
"    };"
"    function md5_hh(a, b, c, d, x, s, t) "
"    {"
"       return md5_cmn(b ^ c ^ d, a, b, x, s, t);"
"    };"
"    function md5_ii(a, b, c, d, x, s, t) "
"    {"
"      return md5_cmn(c ^ (b | (~d)), a, b, x, s, t);"
"    };"
"    /*"
"     * Calculate the MD5 of an array of little-endian words, and a bit length."
"     */"
"    function binl_md5(x, len) "
"    {"
"      /* append padding */"
"      x[len >> 5] |= 0x80 << ((len) % 32);"
"      x[(((len + 64) >>> 9) << 4) + 14] = len;"
"      var i, olda, oldb, oldc, oldd,"
"        a = 1732584193,"
"        b = -271733879,"
"        c = -1732584194,"
"        d = 271733878;"
"      for (i = 0; i < x.length; i += 16) "
"      {"
"        olda = a;"
"        oldb = b;"
"        oldc = c;"
"        oldd = d;"
"        a = md5_ff(a, b, c, d, x[i], 7, -680876936);"
"        d = md5_ff(d, a, b, c, x[i + 1], 12, -389564586);"
"        c = md5_ff(c, d, a, b, x[i + 2], 17, 606105819);"
"        b = md5_ff(b, c, d, a, x[i + 3], 22, -1044525330);"
"        a = md5_ff(a, b, c, d, x[i + 4], 7, -176418897);"
"        d = md5_ff(d, a, b, c, x[i + 5], 12, 1200080426);"
"        c = md5_ff(c, d, a, b, x[i + 6], 17, -1473231341);"
"        b = md5_ff(b, c, d, a, x[i + 7], 22, -45705983);"
"        a = md5_ff(a, b, c, d, x[i + 8], 7, 1770035416);"
"        d = md5_ff(d, a, b, c, x[i + 9], 12, -1958414417);"
"        c = md5_ff(c, d, a, b, x[i + 10], 17, -42063);"
"        b = md5_ff(b, c, d, a, x[i + 11], 22, -1990404162);"
"        a = md5_ff(a, b, c, d, x[i + 12], 7, 1804603682);"
"        d = md5_ff(d, a, b, c, x[i + 13], 12, -40341101);"
"        c = md5_ff(c, d, a, b, x[i + 14], 17, -1502002290);"
"        b = md5_ff(b, c, d, a, x[i + 15], 22, 1236535329);"
"        a = md5_gg(a, b, c, d, x[i + 1], 5, -165796510);"
"        d = md5_gg(d, a, b, c, x[i + 6], 9, -1069501632);"
"        c = md5_gg(c, d, a, b, x[i + 11], 14, 643717713);"
"        b = md5_gg(b, c, d, a, x[i], 20, -373897302);"
"        a = md5_gg(a, b, c, d, x[i + 5], 5, -701558691);"
"        d = md5_gg(d, a, b, c, x[i + 10], 9, 38016083);"
"        c = md5_gg(c, d, a, b, x[i + 15], 14, -660478335);"
"        b = md5_gg(b, c, d, a, x[i + 4], 20, -405537848);"
"        a = md5_gg(a, b, c, d, x[i + 9], 5, 568446438);"
"        d = md5_gg(d, a, b, c, x[i + 14], 9, -1019803690);"
"        c = md5_gg(c, d, a, b, x[i + 3], 14, -187363961);"
"        b = md5_gg(b, c, d, a, x[i + 8], 20, 1163531501);"
"        a = md5_gg(a, b, c, d, x[i + 13], 5, -1444681467);"
"        d = md5_gg(d, a, b, c, x[i + 2], 9, -51403784);"
"        c = md5_gg(c, d, a, b, x[i + 7], 14, 1735328473);"
"        b = md5_gg(b, c, d, a, x[i + 12], 20, -1926607734);"
"        a = md5_hh(a, b, c, d, x[i + 5], 4, -378558);"
"        d = md5_hh(d, a, b, c, x[i + 8], 11, -2022574463);"
"        c = md5_hh(c, d, a, b, x[i + 11], 16, 1839030562);"
"        b = md5_hh(b, c, d, a, x[i + 14], 23, -35309556);"
"        a = md5_hh(a, b, c, d, x[i + 1], 4, -1530992060);"
"        d = md5_hh(d, a, b, c, x[i + 4], 11, 1272893353);"
"        c = md5_hh(c, d, a, b, x[i + 7], 16, -155497632);"
"        b = md5_hh(b, c, d, a, x[i + 10], 23, -1094730640);"
"        a = md5_hh(a, b, c, d, x[i + 13], 4, 681279174);"
"        d = md5_hh(d, a, b, c, x[i], 11, -358537222);"
"        c = md5_hh(c, d, a, b, x[i + 3], 16, -722521979);"
"        b = md5_hh(b, c, d, a, x[i + 6], 23, 76029189);"
"        a = md5_hh(a, b, c, d, x[i + 9], 4, -640364487);"
"        d = md5_hh(d, a, b, c, x[i + 12], 11, -421815835);"
"        c = md5_hh(c, d, a, b, x[i + 15], 16, 530742520);"
"        b = md5_hh(b, c, d, a, x[i + 2], 23, -995338651);"
"        a = md5_ii(a, b, c, d, x[i], 6, -198630844);"
"        d = md5_ii(d, a, b, c, x[i + 7], 10, 1126891415);"
"        c = md5_ii(c, d, a, b, x[i + 14], 15, -1416354905);"
"        b = md5_ii(b, c, d, a, x[i + 5], 21, -57434055);"
"        a = md5_ii(a, b, c, d, x[i + 12], 6, 1700485571);"
"        d = md5_ii(d, a, b, c, x[i + 3], 10, -1894986606);"
"        c = md5_ii(c, d, a, b, x[i + 10], 15, -1051523);"
"        b = md5_ii(b, c, d, a, x[i + 1], 21, -2054922799);"
"        a = md5_ii(a, b, c, d, x[i + 8], 6, 1873313359);"
"        d = md5_ii(d, a, b, c, x[i + 15], 10, -30611744);"
"        c = md5_ii(c, d, a, b, x[i + 6], 15, -1560198380);"
"        b = md5_ii(b, c, d, a, x[i + 13], 21, 1309151649);"
"        a = md5_ii(a, b, c, d, x[i + 4], 6, -145523070);"
"        d = md5_ii(d, a, b, c, x[i + 11], 10, -1120210379);"
"        c = md5_ii(c, d, a, b, x[i + 2], 15, 718787259);"
"        b = md5_ii(b, c, d, a, x[i + 9], 21, -343485551);"
"        a = safe_add(a, olda);"
"        b = safe_add(b, oldb);"
"        c = safe_add(c, oldc);"
"        d = safe_add(d, oldd);"
"      }"
"      return [a, b, c, d];"
"    };"
"    /*"
"     * Convert a raw string to an array of little-endian words"
"     * Characters >255 have their high-byte silently ignored."
"     */"
"    function rstr2binl(input) "
"    {"
"      var i, output = [];"
"      output[(input.length >> 2) - 1] = undefined;"
"      for (i = 0; i < output.length; i += 1) {"
"        output[i] = 0;"
"      }"
"      for (i = 0; i < input.length * 8; i += 8) {"
"        output[i >> 5] |= (input.charCodeAt(i / 8) & 0xFF) << (i % 32);"
"      }"
"      return output;"
"    };"
"    /*"
"     * Convert an array of little-endian words to a string"
"     */"
"    function binl2rstr(input) "
"    {"
"      var i, output = '';"
"      for (i = 0; i < input.length * 32; i += 8) {"
"        output += String.fromCharCode((input[i >> 5] >>> (i % 32)) & 0xFF);"
"      }"
"      return output;"
"    };"
"    /*"
"     * Convert a raw string to a hex string"
"     */"
"    function rstr2hex(input) "
"    {"
"      var hex_tab = '0123456789abcdef',"
"        output = '',"
"        x,"
"        i;"
"      for (i = 0; i < input.length; i += 1) {"
"        x = input.charCodeAt(i);"
"        output += hex_tab.charAt((x >>> 4) & 0x0F) +"
"          hex_tab.charAt(x & 0x0F);"
"      }"
"      return output;"
"    };"
"    return function (str) "
"    {"
"      str = unescape(encodeURIComponent(str));"
"      str = binl_md5(rstr2binl(str), str.length * 8);"
"      str = binl2rstr(str);"
"      return rstr2hex(str);"
"    };"
"  }();"
"  function change_pass() "
"  {"
"    var input1 = prompt('Введите пароль', '');"
"    if (input1 != null)"
"    {"
"      var input2 = prompt('Подтвердите пароль', '');"
"      if (input1 == input2)"
"      {"
"        let md5_newpass = md5(input1);"
"        let command = 'SET_PASSWORD';"
"        req.open('GET', command+md5_newpass);"
"        req.send();"
"        sleep(2000);"
"        document.getElementById('demo').innerHTML = 'Пароль установлен';"
"      }"
"    }"
"   };"
"</script>"
"   <style>"
"      footer {"
"        padding: 10px 20px;"
"        background: #666;"
"        color: white;"
"      }"
"    </style>"
"   <footer>"
"      <p>Компания © GIT. Все права защищены.  +7 495 223-07-25   119571 Москва,  проспект Вернадского, д.94, корп.5</p>"
"    </footer>"
"</html>"